#ifndef _LWIP_COMM_H
#define _LWIP_COMM_H 
#include "typedefs.h"
#include "sys.h"
#include "stm32f4x7_eth.h"

//#include "lan8720.h" 
//////////////////////////////////////////////////////////////////////////////////	 
//本程序只供学习使用，未经作者许可，不得用于其它任何用途
//ALIENTEK STM32F407开发板
//lwip通用驱动 代码	   
//正点原子@ALIENTEK
//技术论坛:www.openedv.com
//创建日期:2014/8/15
//版本：V1.0
//版权所有，盗版必究。
//Copyright(C) 广州市星翼电子科技有限公司 2009-2019
//All rights reserved									  
//*******************************************************************************
//修改信息
//无
////////////////////////////////////////////////////////////////////////////////// 	   
 

#define 	LWIP_MAX_DHCP_TRIES		20   //DHCP服务器最大重试次数
#define   	LWIP_DHCP	1

//lwip控制结构体
typedef struct  
{
	u8 mac[6];      	//MAC地址
	u8 remoteip[4];		//远端主机IP地址 
	u16 remote_port;	//远程端口
	u8 local_ip[4];     //本机IP地址
	u16 local_port;		//本地端口
	u8 netmask[4]; 		//子网掩码
	u8 gateway[4]; 		//默认网关的IP地址
	
	vu8 dhcpstatus;	//dhcp状态 
					//0,未获取DHCP地址;
					//1,进入DHCP获取状态
					//2,成功获取DHCP地址
					//0XFF,获取失败.
}__lwip_dev;
extern __lwip_dev lwipdev;	//lwip控制结构体
 
s8 lwip_pkt_handle(void);
void lwip_comm_default_ip_set(__lwip_dev *lwipx);
u8 lwip_comm_mem_malloc(void);
void lwip_comm_mem_free(void);
u8 lwip_comm_init(uint8 flag);
void lwip_comm_dhcp_creat(void);
void lwip_comm_dhcp_delete(void);
void lwip_comm_destroy(void);
void lwip_comm_delete_next_timeout(void);

//netif up
//void an_netif_set_link_up();


//netif down
void an_netif_set_link_down();

#endif













